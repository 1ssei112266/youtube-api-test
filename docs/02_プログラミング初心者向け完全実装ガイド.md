# Switch 2 ゲーム情報サイト - 完全実装ガイド

## 📚 このドキュメントについて

このガイドは、プログラミング初心者でも**Switch 2 ゲーム情報サイト**を一から実装できるよう、詳しく解説したドキュメントです。

実際のテストプロジェクトのコードを基に、以下を詳しく説明します：
- どのような技術を使っているか
- コードの各部分が何をしているか  
- なぜその実装方法を選んだか
- 実際のプロジェクトで応用する際のポイント

## 🎯 プロジェクト概要

### 何を作るのか
Nintendo Switch 2のゲーム情報を集約するWebサイトです。

**主な機能：**
- ゲーム詳細ページ
- YouTube動画・コメント表示
- Reddit、はてなブックマークの情報統合表示
- サイト内コメント投稿機能
- 発売日カウントダウン
- 4つの情報源を比較表示する機能

### なぜこの技術構成なのか

```
Next.js 15.5.2 + React 19 + TypeScript + Tailwind CSS
```

**Next.js を選んだ理由：**
- ReactベースのWebアプリ開発に最適
- サーバーサイドレンダリング対応
- 本番デプロイが簡単（Vercel等）
- SEO対策がしやすい

**TypeScript を選んだ理由：**
- バグを早期発見できる
- コードの保守性が向上
- チーム開発で型の共有ができる

**Tailwind CSS を選んだ理由：**
- CSSを書かずにデザインできる
- レスポンシブ対応が簡単
- デザインの一貫性を保ちやすい

## 🏗️ プロジェクト構造の理解

### ディレクトリ構成
```
youtube-test/                    # プロジェクトルート
├── src/                        # ソースコード
│   └── app/                    # Next.js App Router
│       ├── page.tsx           # メインページ（全コンポーネント）
│       ├── layout.tsx         # サイト全体レイアウト
│       ├── globals.css        # グローバルスタイル
│       └── favicon.ico        # サイトアイコン
├── public/                     # 画像等の静的ファイル
├── package.json               # 依存関係とスクリプト
├── tsconfig.json              # TypeScript設定
├── eslint.config.mjs          # コード品質チェック設定
├── next.config.ts             # Next.js設定
└── tailwind.config.js         # Tailwind CSS設定
```

### なぜ全コンポーネントを1ファイルにまとめたのか

通常のプロジェクトでは、コンポーネントは別々のファイルに分けますが、このテストプロジェクトでは**学習目的**で1ファイルにまとめています。

**メリット：**
- 全体の構造が一目で分かる
- コンポーネント間の関係が理解しやすい
- コピー&ペーストで試しやすい

**実際のプロジェクトでは：**
```
src/
├── components/
│   ├── atoms/
│   │   ├── Button.tsx
│   │   ├── Badge.tsx
│   │   └── Text.tsx
│   ├── molecules/
│   │   ├── TabButton.tsx
│   │   ├── CommentCard.tsx
│   │   └── VideoCard.tsx
│   └── organisms/
│       ├── GameInfoSection.tsx
│       ├── TabNavigation.tsx
│       └── CommentTabsSection.tsx
├── pages/
│   └── game/
│       └── [id].tsx
└── types/
    └── index.ts
```

このように分けることをお勧めします。

## 🧱 Atomic Design パターンの詳細解説

### Atomic Design とは

Webサイトを原子（Atoms）→分子（Molecules）→有機体（Organisms）→テンプレート（Templates）→ページ（Pages）の順で組み立てる設計手法です。

### 🔬 Atoms（原子）- 最小単位のパーツ

#### Button コンポーネント
```typescript
interface ButtonProps {
  variant: 'primary' | 'secondary' | 'outline';  // ボタンの種類
  size?: 'sm' | 'md' | 'lg';                     // サイズ（?は省略可能）
  children: React.ReactNode;                      // ボタンの中身（文字等）
  onClick?: () => void;                          // クリック時の動作
  className?: string;                            // 追加のスタイル
}
```

**解説：**
- `interface` = TypeScriptの型定義。プロパティの型を指定
- `variant` = ボタンの見た目を3種類から選択
- `children` = Reactで「タグの中身」を表す特別なプロパティ
- `?` = 省略可能なプロパティを表す

#### Badge コンポーネント
```typescript
const Badge = ({ variant, children }: BadgeProps) => {
  const variantClasses = {
    info: 'bg-blue-500 text-white',
    success: 'bg-orange-500 text-white',
    warning: 'bg-yellow-500 text-white',
    error: 'bg-red-500 text-white'
  };
  
  return (
    <span className={`px-2 py-1 text-xs rounded-full ${variantClasses[variant]}`}>
      {children}
    </span>
  );
};
```

**Tailwind CSS の読み方：**
- `px-2` = 左右の余白2単位
- `py-1` = 上下の余白1単位
- `text-xs` = とても小さい文字
- `rounded-full` = 完全に角丸（円形）
- `bg-blue-500` = 青色の背景

### 🧪 Molecules（分子）- Atomsを組み合わせた部品

#### TabButton コンポーネント
```typescript
const TabButton = ({ isActive, children, onClick }: TabButtonProps) => (
  <button
    onClick={onClick}
    className={`py-2 px-4 font-medium text-sm border-b-2 transition-colors rounded-t-lg ${
      isActive 
        ? 'bg-white text-gray-800 border-red-500' 
        : 'bg-gray-700 text-gray-300 border-transparent hover:bg-gray-600'
    }`}
  >
    {children}
  </button>
);
```

**条件分岐の解説：**
- `isActive ? 'スタイルA' : 'スタイルB'` = 三項演算子
- アクティブな時は白背景、そうでなければグレー背景

#### CommentCard コンポーネント
```typescript
const CommentCard = ({ author, content, score, source }: CommentCardProps) => {
  // 情報源ごとの色分け
  const sourceStyles = {
    youtube: 'border-l-red-500 bg-red-50',
    reddit: 'border-l-orange-500 bg-orange-50', 
    hatena: 'border-l-blue-500 bg-blue-50',
    internal: 'border-l-green-500 bg-green-50'
  };

  return (
    <div className={`p-4 border-l-4 rounded-r-lg ${sourceStyles[source]}`}>
      {/* コメント内容表示 */}
    </div>
  );
};
```

**オブジェクトを使った条件分岐：**
- `sourceStyles[source]` でsourceの値に応じたスタイルを選択
- YouTubeなら赤、Redditならオレンジ、のように自動で色分け

### 🦠 Organisms（有機体）- Moleculesを組み合わせた大きな部品

#### CommentTabsSection コンポーネント
```typescript
const CommentTabsSection = ({ 
  activeTab, 
  onTabChange, 
  showComparison, 
  onToggleComparison 
}: CommentTabsSectionProps) => {
  
  // タブのデータ定義
  const tabs = [
    { id: 'youtube', label: 'YouTube', icon: '🎥' },
    { id: 'reddit', label: 'Reddit', icon: '📱' },
    { id: 'hatena', label: 'はてブ', icon: '📑' },
    { id: 'internal', label: 'サイト内', icon: '💬' }
  ];

  return (
    <div>
      {/* タブナビゲーション */}
      <TabNavigation 
        tabs={tabs}
        activeTab={activeTab}
        onTabChange={onTabChange}
        showComparison={showComparison}
        onToggleComparison={onToggleComparison}
      />
      
      {/* コンテンツ表示 */}
      {showComparison ? (
        // 比較表示：4つ同時表示
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          {tabs.map(tab => (
            <div key={tab.id}>
              {renderContent(tab.id as TabType)}
            </div>
          ))}
        </div>
      ) : (
        // 通常表示：選択されたタブのみ
        renderContent(activeTab)
      )}
    </div>
  );
};
```

**重要ポイント：**
- `tabs.map()` = 配列の各要素に対して処理を繰り返す
- `key={tab.id}` = React で list を表示する時の必須属性
- `grid-cols-1 md:grid-cols-2` = スマホは1列、タブレット以上は2列表示

### 📄 Templates & Pages（テンプレートとページ）

#### GameDetailTemplate（全体のレイアウト）
```typescript
const GameDetailTemplate = ({ gameData }: GameDetailTemplateProps) => {
  const [activeTab, setActiveTab] = useState<TabType>('youtube');
  const [showComparison, setShowComparison] = useState(false);

  return (
    <div className="min-h-screen bg-gray-100">
      <div className="container mx-auto px-4 py-8">
        {/* ゲーム情報セクション */}
        <GameInfoSection gameData={gameData} />
        
        {/* コメント・タブセクション */}
        <CommentTabsSection 
          activeTab={activeTab}
          onTabChange={setActiveTab}
          showComparison={showComparison}
          onToggleComparison={() => setShowComparison(!showComparison)}
        />
      </div>
    </div>
  );
};
```

**React State（状態管理）の解説：**
- `useState<TabType>('youtube')` = 初期値'youtube'でactiveTab状態を作成
- `setActiveTab` = 状態を変更する関数
- `!showComparison` = showComparisonの反対の値（true→false, false→true）

## ⏰ リアルタイム機能の実装

### カウントダウンタイマー
```typescript
const CountdownTimer = ({ releaseDate }: CountdownTimerProps) => {
  const [timeLeft, setTimeLeft] = useState({ days: 0, hours: 0, minutes: 0, seconds: 0 });

  useEffect(() => {
    const timer = setInterval(() => {
      const now = new Date().getTime();
      const distance = new Date(releaseDate).getTime() - now;
      
      if (distance > 0) {
        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);
        
        setTimeLeft({ days, hours, minutes, seconds });
      } else {
        setTimeLeft({ days: 0, hours: 0, minutes: 0, seconds: 0 });
      }
    }, 1000);

    return () => clearInterval(timer);
  }, [releaseDate]);

  return <CountdownText {...timeLeft} />;
};
```

**useEffect の解説：**
- `useEffect(() => {}, [])` = コンポーネントが表示された時とreleaseDateが変わった時に実行
- `setInterval(関数, 1000)` = 1秒ごとに関数を実行
- `clearInterval(timer)` = タイマーを停止（メモリリークを防ぐ）

**日時計算の解説：**
- `new Date().getTime()` = 現在の時刻をミリ秒で取得
- `Math.floor(distance / (1000 * 60 * 60 * 24))` = ミリ秒を日数に変換

## 🎨 デザインシステムの設計

### カラーパレット
```typescript
// 各情報源の色分け
const sourceStyles = {
  youtube: 'border-l-red-500 bg-red-50',      // YouTube: 赤
  reddit: 'border-l-orange-500 bg-orange-50', // Reddit: オレンジ  
  hatena: 'border-l-blue-500 bg-blue-50',     // はてブ: 青
  internal: 'border-l-green-500 bg-green-50'  // サイト内: 緑
};
```

### レスポンシブデザイン
```typescript
// Tailwind CSS のブレークポイント
className="grid grid-cols-1 md:grid-cols-2 gap-4"
//         ↑スマホ: 1列  ↑タブレット以上: 2列
```

**ブレークポイント一覧：**
- `sm:` = 640px以上（スマホ横向き）
- `md:` = 768px以上（タブレット）
- `lg:` = 1024px以上（デスクトップ）
- `xl:` = 1280px以上（大画面）

## 🔄 状態管理の理解

### React State の基本
```typescript
// ✅ 良い例：状態の初期化
const [activeTab, setActiveTab] = useState<TabType>('youtube');

// ✅ 良い例：状態の更新
const handleTabChange = (newTab: TabType) => {
  setActiveTab(newTab);
};

// ❌ 悪い例：直接代入（Reactでは禁止）
// activeTab = 'reddit';  // これはエラーになる
```

### Props の受け渡し
```typescript
// 親コンポーネントから子コンポーネントへデータを渡す
<CommentTabsSection 
  activeTab={activeTab}                    // 現在のタブ
  onTabChange={setActiveTab}               // タブ変更関数
  showComparison={showComparison}          // 比較表示フラグ
  onToggleComparison={() => setShowComparison(!showComparison)}  // 比較表示切替
/>
```

## 📱 実装のポイントとベストプラクティス

### 1. TypeScript の活用
```typescript
// ✅ 型定義で安全性を確保
interface GameData {
  title: string;
  releaseDate: string;
  description: string;
  imageUrl: string;
  tags: string[];
}

// ✅ タブの型を限定
type TabType = 'youtube' | 'reddit' | 'hatena' | 'internal';
```

### 2. コンポーネントの再利用性
```typescript
// ✅ 汎用的なButtonコンポーネント
<Button variant="primary" size="lg" onClick={handleClick}>
  クリック
</Button>

// ✅ 同じコンポーネントを異なる設定で使用
<Button variant="outline" size="sm" onClick={handleCancel}>
  キャンセル
</Button>
```

### 3. CSS クラスの条件分岐
```typescript
// ✅ テンプレートリテラルで動的スタイル
className={`base-style ${isActive ? 'active-style' : 'inactive-style'}`}

// ✅ 複雑な条件の場合はオブジェクトを使用
const buttonStyles = {
  primary: 'bg-red-500 text-white',
  secondary: 'bg-gray-500 text-white',
  outline: 'border border-red-500 text-red-500'
};
className={buttonStyles[variant]}
```

## 🚀 次のステップ

このテストプロジェクトを理解したら、次は以下を実装してみましょう：

1. **API連携の実装**（別ドキュメントで詳しく解説）
2. **データベース連携**
3. **ユーザー認証機能**
4. **本番環境へのデプロイ**

各項目の詳細実装方法は、対応するドキュメントをご覧ください。

## 💡 初心者向けのコツ

### コードを理解する順番
1. **全体構造** → ディレクトリ構成を把握
2. **データの流れ** → Props がどう渡されるか確認
3. **状態管理** → useState の使い方を理解
4. **スタイリング** → Tailwind CSS の書き方に慣れる
5. **TypeScript** → 型定義の読み方をマスター

### デバッグのコツ
```typescript
// ✅ console.log でデバッグ
const handleTabChange = (newTab: TabType) => {
  console.log('タブが変更されました:', newTab);
  setActiveTab(newTab);
};

// ✅ React Developer Tools の活用
// ブラウザの拡張機能をインストールして state を確認
```

### 学習リソース
- **React 公式ドキュメント**: https://ja.react.dev/
- **Next.js 公式ドキュメント**: https://nextjs.org/docs
- **Tailwind CSS 公式ドキュメント**: https://tailwindcss.com/docs
- **TypeScript 公式ドキュメント**: https://www.typescriptlang.org/docs/

これで基本的な実装パターンは理解できたと思います。次は実際のAPI連携について学んでいきましょう！